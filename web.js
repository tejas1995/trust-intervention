(()=>{"use strict";var t={d:(e,o)=>{for(var n in o)t.o(o,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:o[n]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)};t.d({},{o:()=>o});let e="https://tejassrinivasan.pythonanywhere.com/";var o=!1,n=[];let i,r,s,a,c=-1,l=null,u=null,d=0,_=1,h=0,b=0;function g(t){h+=t,0==h?$("#button_instructions_prev").attr("disabled","true"):$("#button_instructions_prev").removeAttr("disabled"),h>=5?($("#instructions_and_decorations").show(),$("#button_instructions_next").val("Start study")):($("#instructions_and_decorations").hide(),$("#button_instructions_next").val("Next")),6==h&&($("#main_box_instructions").hide(),$("#main_box_experiment").show(),m()),$("#main_box_instructions").children(":not(input)").each(((t,e)=>{$(e).hide()})),$(`#instructions_${h}`).show()}function p(t){s=Date.now(),u=t,t?($("#button_decision_correct").attr("activedecision","true"),$("#button_decision_incorrect").removeAttr("activedecision")):($("#button_decision_correct").removeAttr("activedecision"),$("#button_decision_incorrect").attr("activedecision","true")),$("#how_confident_div").show()}function m(){if($("#button_decision_incorrect").removeAttr("activedecision"),$("#button_decision_correct").removeAttr("activedecision"),$("#button_decision_incorrect").removeAttr("disabled"),$("#button_decision_correct").removeAttr("disabled"),$("#range_val").removeAttr("disabled"),$("#how_confident_div").hide(),$("#button_place_bet").hide(),$("#button_next").hide(),$("#result_span").hide(),$("#range_text").text("-"),$("#range_val").val(3),c+=1,c>=n.length)return $("#main_box_experiment").hide(),void(o?$("#main_box_end_mock").show():$("#main_box_end").show());if(l=n[c],$("#question_span").html(l.question),$("#answer_span").html(l.answer),$("#confidence_span").html(l.ai_confidence),l.hasOwnProperty("reward_ratio")){let[t,e]=l.reward_ratio;t=Number(t),e=Number(e),_=t/e}else _=1;r=Date.now(),$("#progress").text(`Progress: ${c+1} / ${n.length}`)}$("#button_instructions_next").on("click",(()=>g(1))),$("#button_instructions_prev").on("click",(()=>g(-1))),$("#button_next").on("click",(()=>{if(-1!=c){let t={question_i:c,user_balance:d,user_bet_val:i,user_decision:u};t.times={decision:s-r,bet:a-s,next:Date.now()-a},t.question=l,t.count_exited_page=b,async function(t){if(o)console.log("logged (mock)",t);else{t.url_data=globalThis.url_data,console.log("Data"),"study_id"in t.url_data||(t.url_data.study_id="trialrun_studies"),console.log("logged",t),console.log("Logging to",e+"log");try{return await $.ajax(e+"log",{data:JSON.stringify({project:"trust-intervention/"+t.url_data.study_id,uid:globalThis.uid,payload:JSON.stringify(t)}),type:"POST",contentType:"application/json"})}catch(t){console.log(t)}}}(t),b=0}m()})),$("#range_val").on("input change",(function(){i=$(this).val()/5*.1,$("#range_text").text(`If you are right, you get $${(i*_).toFixed(2)}. If you are wrong, you lose $${(i/1).toFixed(2)}.`),$("#button_place_bet").show()})),$("#button_decision_correct").on("click",(()=>p(!0))),$("#button_decision_incorrect").on("click",(()=>p(!1))),$("#button_place_bet").on("click",(function(){a=Date.now();let t,e="You guessed that the system was ";u?(e+="<span class='color_correct'>correct</span> ",l.ai_is_correct?(e+="and the system was <span class='color_correct'>correct</span>.",t=!0):(e+="but the system was <span class='color_incorrect'>not correct</span>.",t=!1)):(e+="<span class='color_incorrect'>incorrect</span> ",l.ai_is_correct?(e+="but the system was <span class='color_correct'>correct</span>.",t=!1):(e+="and the system was <span class='color_incorrect'>not correct</span>.",t=!0)),e+="<br>",t?(e+=`You gain $${(i*_).toFixed(2)}.`,d+=i*_):(e+=`You lose $${(i/1).toFixed(2)}.`,d-=i/1,d=Math.max(0,d)),$("#balance").text(`Balance: $${d.toFixed(2)} + $1.0`),$("#result_span").html(e),$("#button_next").show(),$("#result_span").show(),$("#button_place_bet").hide(),$("#range_val").attr("disabled","true"),$("#button_decision_incorrect").attr("disabled","true"),$("#button_decision_correct").attr("disabled","true")}));const w=new URLSearchParams(window.location.search),v=w.get("start"),y=w.get("uid");if(globalThis.url_data=function(t){const e={};for(const[o,n]of t)e[o]=n;return e}(w.entries()),null!=y){if(globalThis.uid=y,"prolific_random"==globalThis.uid){let t=`${Math.floor(10*Math.random())}`.padStart(3,"0");globalThis.uid=`${w.get("prolific_queue_name")}_${t}`}}else{let t=null;for(;null==t;)t=prompt("Enter your user id. Please get in touch if you were not assigned an id but wish to participate in this experiment.");globalThis.uid=t}globalThis.uid.startsWith("demo_paper")&&(o=!0),console.log("Running with UID",globalThis.uid),async function(){return await $.getJSON(`baked_queues/${globalThis.uid}.json?t=${Date.now()}`)}().catch((t=>{alert("Invalid user id."),console.log("Invalid user id."),console.log(globalThis.uid),window.location.reload()})).then((t=>{n=t,null!=v&&(c=parseInt(v)-1,console.log("Starting from",c)),g(0),$("#main_box_instructions").show(),$("#instructions_and_decorations").hide()})),console.log("Starting session with UID:",globalThis.uid);let f=!1;document.onvisibilitychange=()=>{f||(b+=1,f=!0,alert("Please don't leave the page. If you do so again, we may restrict paying you."),f=!1)}})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Z0YsRUFFaEIsT0FBT0QsQ0FDVCxDRG9Mc0JFLENBQWVWLEVBQVVPLFdBRTdCLE1BQWRELEdBRUEsR0FEQXhCLFdBQVdNLElBQU1rQixFQUNLLG1CQUFsQnhCLFdBQVdNLElBQTBCLENBQ3JDLElBQUl1QixFQUFXLEdBQUdiLEtBQUtjLE1BQXNCLEdBQWhCZCxLQUFLZSxZQUFpQkMsU0FBUyxFQUFHLEtBQy9EaEMsV0FBV00sSUFBTSxHQUFHWSxFQUFVbEUsSUFBSSwwQkFBMEI2RSxHLE1BSTdELENBQ0gsSUFBSUksRUFBaUIsS0FDckIsS0FBb0IsTUFBYkEsR0FDSEEsRUFBWUMsT0FBTyxzSEFFdkJsQyxXQUFXTSxJQUFNMkIsQyxDQUlqQmpDLFdBQVdNLElBQUk2QixXQUFXLGdCQUMxQjVFLEdBQVcsR0FJZnVDLFFBQVFDLElBQUksbUJBQW9CQyxXQUFXTSxLRDlNcENULGlCQUtILGFBSG1CdkIsRUFBRThELFFBQ2pCLGdCQUFnQnBDLFdBQVdNLGNBQWNuQixLQUFLQyxRQUd0RCxDQ3lNQWlELEdBQVlDLE9BQU9DLElBQ2ZDLE1BQU0sb0JBQ04xQyxRQUFRQyxJQUFJLG9CQUNaRCxRQUFRQyxJQUFJQyxXQUFXTSxLQUN2QmMsT0FBT0MsU0FBU29CLFFBQVEsSUFFMUJDLE1BQU1DLElBQ0puRixFQUFPbUYsRUFDYyxNQUFqQnBCLElBQ0ExRCxFQUFhK0UsU0FBU3JCLEdBQWlCLEVBQ3ZDekIsUUFBUUMsSUFBSSxnQkFBaUJsQyxJQUdqQ08sRUFBa0IsR0FDbEJFLEVBQUUsMEJBQTBCRyxPQUM1QkgsRUFBRSxpQ0FBaUNLLE1BQU0sSUFHN0NtQixRQUFRQyxJQUFJLDZCQUE4QkMsV0FBV00sS0FFckQsSUFBSXVDLEdBQWUsRUFDbkJDLFNBQVNDLG1CQUFxQixLQUNyQkYsSUFDRDFFLEdBQXFCLEVBQ3JCMEUsR0FBZSxFQUNmTCxNQUFNLGdGQUNOSyxHQUFlLEUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vL3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly8vd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly8vLi9zcmMvY29ubmVjdG9yLnRzIiwid2VicGFjazovLy8uL3NyYy9tYWluLnRzIiwid2VicGFjazovLy8uL3NyYy91dGlscy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGUgcmVxdWlyZSBzY29wZVxudmFyIF9fd2VicGFja19yZXF1aXJlX18gPSB7fTtcblxuIiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsImltcG9ydCB7IERFVk1PREUgfSBmcm9tICcuL2dsb2JhbHMnXG5pbXBvcnQgeyBNT0NLTU9ERSB9IGZyb20gJy4vbWFpbidcblxubGV0IFNFUlZFUl9MT0dfUk9PVCA9IERFVk1PREUgPyBcImh0dHA6Ly8xMjcuMC4wLjE6NTAwMC9cIiA6IFwiaHR0cHM6Ly90ZWphc3NyaW5pdmFzYW4ucHl0aG9uYW55d2hlcmUuY29tL1wiXG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBsb2FkX2RhdGEoKTogUHJvbWlzZTxhbnk+IHtcbiAgICAvLyBpbmNsdWRlIHRpbWVzdGFtcCBzbyB0aGF0IHRoaW5ncyBkb24ndCBnZXQgY2FjaGVkXG4gICAgbGV0IHJlc3VsdCA9IGF3YWl0ICQuZ2V0SlNPTihcbiAgICAgICAgYGJha2VkX3F1ZXVlcy8ke2dsb2JhbFRoaXMudWlkfS5qc29uP3Q9JHtEYXRlLm5vdygpfWAsXG4gICAgKVxuICAgIHJldHVybiByZXN1bHRcbn1cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBsb2dfZGF0YShkYXRhKTogUHJvbWlzZTxhbnk+IHtcbiAgICBpZiAoTU9DS01PREUpIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJsb2dnZWQgKG1vY2spXCIsIGRhdGEpXG4gICAgICAgIHJldHVyblxuICAgIH1cbiAgICBcbiAgICBkYXRhW1widXJsX2RhdGFcIl0gPSBnbG9iYWxUaGlzLnVybF9kYXRhXG4gICAgY29uc29sZS5sb2coXCJEYXRhXCIpXG4gICAgaWYgKCEoXCJzdHVkeV9pZFwiIGluIGRhdGFbJ3VybF9kYXRhJ10pKSB7XG4gICAgICAgIGRhdGFbJ3VybF9kYXRhJ11bXCJzdHVkeV9pZFwiXSA9IFwidHJpYWxydW5fc3R1ZGllc1wiXG4gICAgfVxuICAgIGNvbnNvbGUubG9nKFwibG9nZ2VkXCIsIGRhdGEpXG4gICAgY29uc29sZS5sb2coXCJMb2dnaW5nIHRvXCIsIFNFUlZFUl9MT0dfUk9PVCArIFwibG9nXCIpXG5cbiAgICB0cnkge1xuICAgICAgICBsZXQgcmVzdWx0ID0gYXdhaXQgJC5hamF4KFxuICAgICAgICAgICAgU0VSVkVSX0xPR19ST09UICsgXCJsb2dcIixcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBkYXRhOiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgICAgIHByb2plY3Q6IFwidHJ1c3QtaW50ZXJ2ZW50aW9uL1wiK2RhdGFbJ3VybF9kYXRhJ11bJ3N0dWR5X2lkJ10sXG4gICAgICAgICAgICAgICAgICAgIHVpZDogZ2xvYmFsVGhpcy51aWQsXG4gICAgICAgICAgICAgICAgICAgIHBheWxvYWQ6IEpTT04uc3RyaW5naWZ5KGRhdGEpLFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIHR5cGU6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICBjb250ZW50VHlwZTogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgfVxuICAgICAgICApXG4gICAgICAgIHJldHVybiByZXN1bHRcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGUpXG4gICAgfVxufSIsImltcG9ydCB7IERFVk1PREUgfSBmcm9tIFwiLi9nbG9iYWxzXCJcbmV4cG9ydCB2YXIgVUlEOiBzdHJpbmdcbmV4cG9ydCB2YXIgTU9DS01PREU6IGJvb2xlYW4gPSBmYWxzZVxuaW1wb3J0IHsgbG9hZF9kYXRhLCBsb2dfZGF0YSB9IGZyb20gJy4vY29ubmVjdG9yJ1xuaW1wb3J0IHsgcGFyYW1zVG9PYmplY3QgfSBmcm9tIFwiLi91dGlsc1wiXG5cbnZhciBkYXRhOiBhbnlbXSA9IFtdXG5sZXQgcXVlc3Rpb25faSA9IC0xXG5sZXQgcXVlc3Rpb246IGFueSA9IG51bGxcbmxldCB1c2VyX2RlY2lzaW9uOiBudWxsIHwgYm9vbGVhbiA9IG51bGxcbmxldCBiYWxhbmNlID0gMFxubGV0IGJldF92YWw6IG51bWJlclxubGV0IGJldF92YWxfcmF0aW86IG51bWJlciA9IDFcbmxldCB0aW1lX3F1ZXN0aW9uX3N0YXJ0OiBudW1iZXJcbmxldCB0aW1lX2JldF9zdGFydDogbnVtYmVyXG5sZXQgdGltZV9zaG93ZWRfcmVzdWx0c19zdGFydDogbnVtYmVyXG5sZXQgaW5zdHJ1Y3Rpb25faTogbnVtYmVyID0gMFxubGV0IGNvdW50X2V4aXRlZF9wYWdlOiBudW1iZXIgPSAwXG5cbmZ1bmN0aW9uIG5leHRfaW5zdHJ1Y3Rpb25zKGluY3JlbWVudDogbnVtYmVyKSB7XG4gICAgaW5zdHJ1Y3Rpb25faSArPSBpbmNyZW1lbnRcblxuICAgIGlmIChpbnN0cnVjdGlvbl9pID09IDApIHtcbiAgICAgICAgJChcIiNidXR0b25faW5zdHJ1Y3Rpb25zX3ByZXZcIikuYXR0cihcImRpc2FibGVkXCIsIFwidHJ1ZVwiKVxuICAgIH0gZWxzZSB7XG4gICAgICAgICQoXCIjYnV0dG9uX2luc3RydWN0aW9uc19wcmV2XCIpLnJlbW92ZUF0dHIoXCJkaXNhYmxlZFwiKVxuICAgIH1cbiAgICBpZiAoaW5zdHJ1Y3Rpb25faSA+PSA1KSB7XG4gICAgICAgICQoXCIjaW5zdHJ1Y3Rpb25zX2FuZF9kZWNvcmF0aW9uc1wiKS5zaG93KClcbiAgICAgICAgJChcIiNidXR0b25faW5zdHJ1Y3Rpb25zX25leHRcIikudmFsKFwiU3RhcnQgc3R1ZHlcIilcbiAgICB9IGVsc2Uge1xuICAgICAgICAkKFwiI2luc3RydWN0aW9uc19hbmRfZGVjb3JhdGlvbnNcIikuaGlkZSgpXG4gICAgICAgICQoXCIjYnV0dG9uX2luc3RydWN0aW9uc19uZXh0XCIpLnZhbChcIk5leHRcIilcbiAgICB9XG4gICAgaWYgKGluc3RydWN0aW9uX2kgPT0gNikge1xuICAgICAgICAkKFwiI21haW5fYm94X2luc3RydWN0aW9uc1wiKS5oaWRlKClcbiAgICAgICAgJChcIiNtYWluX2JveF9leHBlcmltZW50XCIpLnNob3coKVxuICAgICAgICBuZXh0X3F1ZXN0aW9uKClcbiAgICB9XG5cbiAgICAkKFwiI21haW5fYm94X2luc3RydWN0aW9uc1wiKS5jaGlsZHJlbihcIjpub3QoaW5wdXQpXCIpLmVhY2goKF8sIGVsKSA9PiB7XG4gICAgICAgICQoZWwpLmhpZGUoKVxuICAgIH0pXG4gICAgJChgI2luc3RydWN0aW9uc18ke2luc3RydWN0aW9uX2l9YCkuc2hvdygpXG59XG4kKFwiI2J1dHRvbl9pbnN0cnVjdGlvbnNfbmV4dFwiKS5vbihcImNsaWNrXCIsICgpID0+IG5leHRfaW5zdHJ1Y3Rpb25zKCsxKSlcbiQoXCIjYnV0dG9uX2luc3RydWN0aW9uc19wcmV2XCIpLm9uKFwiY2xpY2tcIiwgKCkgPT4gbmV4dF9pbnN0cnVjdGlvbnMoLTEpKVxuXG4kKFwiI2J1dHRvbl9uZXh0XCIpLm9uKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgIGlmIChxdWVzdGlvbl9pICE9IC0xKSB7XG4gICAgICAgIGxldCBsb2dnZWRfZGF0YSA9IHtcbiAgICAgICAgICAgIFwicXVlc3Rpb25faVwiOiBxdWVzdGlvbl9pLFxuICAgICAgICAgICAgXCJ1c2VyX2JhbGFuY2VcIjogYmFsYW5jZSxcbiAgICAgICAgICAgIFwidXNlcl9iZXRfdmFsXCI6IGJldF92YWwsXG4gICAgICAgICAgICBcInVzZXJfZGVjaXNpb25cIjogdXNlcl9kZWNpc2lvbixcbiAgICAgICAgfVxuXG4gICAgICAgIGxvZ2dlZF9kYXRhWyd0aW1lcyddID0ge1xuICAgICAgICAgICAgXCJkZWNpc2lvblwiOiB0aW1lX2JldF9zdGFydCAtIHRpbWVfcXVlc3Rpb25fc3RhcnQsXG4gICAgICAgICAgICBcImJldFwiOiB0aW1lX3Nob3dlZF9yZXN1bHRzX3N0YXJ0IC0gdGltZV9iZXRfc3RhcnQsXG4gICAgICAgICAgICBcIm5leHRcIjogRGF0ZS5ub3coKSAtIHRpbWVfc2hvd2VkX3Jlc3VsdHNfc3RhcnRcbiAgICAgICAgfVxuICAgICAgICBsb2dnZWRfZGF0YVsncXVlc3Rpb24nXSA9IHF1ZXN0aW9uXG4gICAgICAgIGxvZ2dlZF9kYXRhWydjb3VudF9leGl0ZWRfcGFnZSddID0gY291bnRfZXhpdGVkX3BhZ2VcbiAgICAgICAgbG9nX2RhdGEobG9nZ2VkX2RhdGEpXG4gICAgICAgIGNvdW50X2V4aXRlZF9wYWdlID0gMFxuICAgIH1cbiAgICBuZXh0X3F1ZXN0aW9uKClcbn0pO1xuXG4kKCcjcmFuZ2VfdmFsJykub24oJ2lucHV0IGNoYW5nZScsIGZ1bmN0aW9uICgpIHtcbiAgICBiZXRfdmFsID0gKCQodGhpcykudmFsKCkhIGFzIG51bWJlcikgLyA1ICogMC4xXG4gICAgJChcIiNyYW5nZV90ZXh0XCIpLnRleHQoYElmIHlvdSBhcmUgcmlnaHQsIHlvdSBnZXQgJCR7KGJldF92YWwqYmV0X3ZhbF9yYXRpbykudG9GaXhlZCgyKX0uIElmIHlvdSBhcmUgd3JvbmcsIHlvdSBsb3NlICQkeyhiZXRfdmFsLzEuMCkudG9GaXhlZCgyKX0uYClcbiAgICAkKFwiI2J1dHRvbl9wbGFjZV9iZXRcIikuc2hvdygpXG59KTtcblxuZnVuY3Rpb24gZmxpcF91c2VyX2RlY2lzaW9uKGNvcnJlY3QpIHtcbiAgICB0aW1lX2JldF9zdGFydCA9IERhdGUubm93KClcbiAgICB1c2VyX2RlY2lzaW9uID0gY29ycmVjdFxuICAgIGlmIChjb3JyZWN0KSB7XG4gICAgICAgICQoXCIjYnV0dG9uX2RlY2lzaW9uX2NvcnJlY3RcIikuYXR0cihcImFjdGl2ZWRlY2lzaW9uXCIsIFwidHJ1ZVwiKVxuICAgICAgICAkKFwiI2J1dHRvbl9kZWNpc2lvbl9pbmNvcnJlY3RcIikucmVtb3ZlQXR0cihcImFjdGl2ZWRlY2lzaW9uXCIpXG4gICAgfSBlbHNlIHtcbiAgICAgICAgJChcIiNidXR0b25fZGVjaXNpb25fY29ycmVjdFwiKS5yZW1vdmVBdHRyKFwiYWN0aXZlZGVjaXNpb25cIilcbiAgICAgICAgJChcIiNidXR0b25fZGVjaXNpb25faW5jb3JyZWN0XCIpLmF0dHIoXCJhY3RpdmVkZWNpc2lvblwiLCBcInRydWVcIilcbiAgICB9XG4gICAgJChcIiNob3dfY29uZmlkZW50X2RpdlwiKS5zaG93KClcbn1cblxuJChcIiNidXR0b25fZGVjaXNpb25fY29ycmVjdFwiKS5vbihcImNsaWNrXCIsICgpID0+IGZsaXBfdXNlcl9kZWNpc2lvbih0cnVlKSlcbiQoXCIjYnV0dG9uX2RlY2lzaW9uX2luY29ycmVjdFwiKS5vbihcImNsaWNrXCIsICgpID0+IGZsaXBfdXNlcl9kZWNpc2lvbihmYWxzZSkpXG5cbmZ1bmN0aW9uIHNob3dfcmVzdWx0KCkge1xuICAgIHRpbWVfc2hvd2VkX3Jlc3VsdHNfc3RhcnQgPSBEYXRlLm5vdygpXG5cbiAgICBsZXQgbWVzc2FnZSA9IFwiWW91IGd1ZXNzZWQgdGhhdCB0aGUgc3lzdGVtIHdhcyBcIlxuICAgIGxldCBzdWNjZXNzOiBib29sZWFuXG4gICAgaWYgKHVzZXJfZGVjaXNpb24pIHtcbiAgICAgICAgbWVzc2FnZSArPSBcIjxzcGFuIGNsYXNzPSdjb2xvcl9jb3JyZWN0Jz5jb3JyZWN0PC9zcGFuPiBcIlxuICAgICAgICBpZiAocXVlc3Rpb24hW1wiYWlfaXNfY29ycmVjdFwiXSkge1xuICAgICAgICAgICAgbWVzc2FnZSArPSBcImFuZCB0aGUgc3lzdGVtIHdhcyA8c3BhbiBjbGFzcz0nY29sb3JfY29ycmVjdCc+Y29ycmVjdDwvc3Bhbj4uXCJcbiAgICAgICAgICAgIHN1Y2Nlc3MgPSB0cnVlXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBtZXNzYWdlICs9IFwiYnV0IHRoZSBzeXN0ZW0gd2FzIDxzcGFuIGNsYXNzPSdjb2xvcl9pbmNvcnJlY3QnPm5vdCBjb3JyZWN0PC9zcGFuPi5cIlxuICAgICAgICAgICAgc3VjY2VzcyA9IGZhbHNlXG4gICAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgICBtZXNzYWdlICs9IFwiPHNwYW4gY2xhc3M9J2NvbG9yX2luY29ycmVjdCc+aW5jb3JyZWN0PC9zcGFuPiBcIlxuICAgICAgICBpZiAoIXF1ZXN0aW9uIVtcImFpX2lzX2NvcnJlY3RcIl0pIHtcbiAgICAgICAgICAgIG1lc3NhZ2UgKz0gXCJhbmQgdGhlIHN5c3RlbSB3YXMgPHNwYW4gY2xhc3M9J2NvbG9yX2luY29ycmVjdCc+bm90IGNvcnJlY3Q8L3NwYW4+LlwiXG4gICAgICAgICAgICBzdWNjZXNzID0gdHJ1ZVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbWVzc2FnZSArPSBcImJ1dCB0aGUgc3lzdGVtIHdhcyA8c3BhbiBjbGFzcz0nY29sb3JfY29ycmVjdCc+Y29ycmVjdDwvc3Bhbj4uXCJcbiAgICAgICAgICAgIHN1Y2Nlc3MgPSBmYWxzZVxuICAgICAgICB9XG4gICAgfVxuICAgIG1lc3NhZ2UgKz0gXCI8YnI+XCJcbiAgICBpZiAoc3VjY2Vzcykge1xuICAgICAgICBtZXNzYWdlICs9IGBZb3UgZ2FpbiAkJHsoYmV0X3ZhbCpiZXRfdmFsX3JhdGlvKS50b0ZpeGVkKDIpfS5gXG4gICAgICAgIGJhbGFuY2UgKz0gYmV0X3ZhbCpiZXRfdmFsX3JhdGlvXG4gICAgfSBlbHNlIHtcbiAgICAgICAgbWVzc2FnZSArPSBgWW91IGxvc2UgJCR7KGJldF92YWwvMS4wKS50b0ZpeGVkKDIpfS5gXG4gICAgICAgIGJhbGFuY2UgLT0gYmV0X3ZhbC8xLjBcbiAgICAgICAgYmFsYW5jZSA9IE1hdGgubWF4KDAsIGJhbGFuY2UpXG4gICAgfVxuICAgICQoXCIjYmFsYW5jZVwiKS50ZXh0KGBCYWxhbmNlOiAkJHtiYWxhbmNlLnRvRml4ZWQoMil9ICsgJDEuMGApXG4gICAgJChcIiNyZXN1bHRfc3BhblwiKS5odG1sKG1lc3NhZ2UpXG4gICAgJChcIiNidXR0b25fbmV4dFwiKS5zaG93KClcbiAgICAkKFwiI3Jlc3VsdF9zcGFuXCIpLnNob3coKVxuICAgICQoXCIjYnV0dG9uX3BsYWNlX2JldFwiKS5oaWRlKClcblxuICAgICQoJyNyYW5nZV92YWwnKS5hdHRyKFwiZGlzYWJsZWRcIiwgXCJ0cnVlXCIpXG4gICAgJChcIiNidXR0b25fZGVjaXNpb25faW5jb3JyZWN0XCIpLmF0dHIoXCJkaXNhYmxlZFwiLCBcInRydWVcIilcbiAgICAkKFwiI2J1dHRvbl9kZWNpc2lvbl9jb3JyZWN0XCIpLmF0dHIoXCJkaXNhYmxlZFwiLCBcInRydWVcIilcbn1cblxuJChcIiNidXR0b25fcGxhY2VfYmV0XCIpLm9uKFwiY2xpY2tcIiwgc2hvd19yZXN1bHQpXG5cbmZ1bmN0aW9uIG5leHRfcXVlc3Rpb24oKSB7XG4gICAgLy8gcmVzdG9yZSBwcmV2aW91cyBzdGF0ZSBvZiBVSVxuICAgICQoXCIjYnV0dG9uX2RlY2lzaW9uX2luY29ycmVjdFwiKS5yZW1vdmVBdHRyKFwiYWN0aXZlZGVjaXNpb25cIilcbiAgICAkKFwiI2J1dHRvbl9kZWNpc2lvbl9jb3JyZWN0XCIpLnJlbW92ZUF0dHIoXCJhY3RpdmVkZWNpc2lvblwiKVxuICAgICQoXCIjYnV0dG9uX2RlY2lzaW9uX2luY29ycmVjdFwiKS5yZW1vdmVBdHRyKFwiZGlzYWJsZWRcIilcbiAgICAkKFwiI2J1dHRvbl9kZWNpc2lvbl9jb3JyZWN0XCIpLnJlbW92ZUF0dHIoXCJkaXNhYmxlZFwiKVxuICAgICQoJyNyYW5nZV92YWwnKS5yZW1vdmVBdHRyKFwiZGlzYWJsZWRcIilcbiAgICAkKFwiI2hvd19jb25maWRlbnRfZGl2XCIpLmhpZGUoKVxuICAgICQoXCIjYnV0dG9uX3BsYWNlX2JldFwiKS5oaWRlKClcbiAgICAkKFwiI2J1dHRvbl9uZXh0XCIpLmhpZGUoKVxuICAgICQoXCIjcmVzdWx0X3NwYW5cIikuaGlkZSgpXG4gICAgJChcIiNyYW5nZV90ZXh0XCIpLnRleHQoXCItXCIpXG4gICAgJChcIiNyYW5nZV92YWxcIikudmFsKDMpXG5cbiAgICBxdWVzdGlvbl9pICs9IDFcbiAgICBpZiAocXVlc3Rpb25faSA+PSBkYXRhLmxlbmd0aCkge1xuICAgICAgICAkKFwiI21haW5fYm94X2V4cGVyaW1lbnRcIikuaGlkZSgpXG4gICAgICAgIGlmIChNT0NLTU9ERSkge1xuICAgICAgICAgICAgJChcIiNtYWluX2JveF9lbmRfbW9ja1wiKS5zaG93KClcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICQoXCIjbWFpbl9ib3hfZW5kXCIpLnNob3coKVxuICAgICAgICB9XG4gICAgICAgIHJldHVyblxuICAgIH1cbiAgICBxdWVzdGlvbiA9IGRhdGFbcXVlc3Rpb25faV1cblxuICAgICQoXCIjcXVlc3Rpb25fc3BhblwiKS5odG1sKHF1ZXN0aW9uIVtcInF1ZXN0aW9uXCJdKVxuICAgICQoXCIjYW5zd2VyX3NwYW5cIikuaHRtbChxdWVzdGlvbiFbXCJhbnN3ZXJcIl0pXG4gICAgJChcIiNjb25maWRlbmNlX3NwYW5cIikuaHRtbChxdWVzdGlvbiFbXCJhaV9jb25maWRlbmNlXCJdKVxuXG4gICAgLy8gc2V0IGJldCB2YWx1ZSByYXRpb1xuICAgIGlmKHF1ZXN0aW9uLmhhc093blByb3BlcnR5KFwicmV3YXJkX3JhdGlvXCIpKSB7XG4gICAgICAgIGxldCBbcmF0aW8xLCByYXRpbzJdID0gcXVlc3Rpb25bXCJyZXdhcmRfcmF0aW9cIl1cbiAgICAgICAgcmF0aW8xID0gTnVtYmVyKHJhdGlvMSlcbiAgICAgICAgcmF0aW8yID0gTnVtYmVyKHJhdGlvMilcbiAgICAgICAgYmV0X3ZhbF9yYXRpbyA9IHJhdGlvMS9yYXRpbzJcbiAgICB9IGVsc2Uge1xuICAgICAgICBiZXRfdmFsX3JhdGlvID0gMVxuICAgIH1cblxuICAgIHRpbWVfcXVlc3Rpb25fc3RhcnQgPSBEYXRlLm5vdygpXG4gICAgJChcIiNwcm9ncmVzc1wiKS50ZXh0KGBQcm9ncmVzczogJHtxdWVzdGlvbl9pICsgMX0gLyAke2RhdGEubGVuZ3RofWApXG59XG5cbi8vIGdldCB1c2VyIGlkIGFuZCBsb2FkIHF1ZXVlXG4vLyB0cnkgdG8gc2VlIGlmIHN0YXJ0IG92ZXJyaWRlIHdhcyBwYXNzZWRcbmNvbnN0IHVybFBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMod2luZG93LmxvY2F0aW9uLnNlYXJjaCk7XG5jb25zdCBzdGFydE92ZXJyaWRlID0gdXJsUGFyYW1zLmdldCgnc3RhcnQnKTtcbmNvbnN0IFVJREZyb21VUkwgPSB1cmxQYXJhbXMuZ2V0KFwidWlkXCIpXG5nbG9iYWxUaGlzLnVybF9kYXRhID0gcGFyYW1zVG9PYmplY3QodXJsUGFyYW1zLmVudHJpZXMoKSlcblxuaWYgKFVJREZyb21VUkwgIT0gbnVsbCkge1xuICAgIGdsb2JhbFRoaXMudWlkID0gVUlERnJvbVVSTCBhcyBzdHJpbmdcbiAgICBpZiAoZ2xvYmFsVGhpcy51aWQgPT0gXCJwcm9saWZpY19yYW5kb21cIikge1xuICAgICAgICBsZXQgcXVldWVfaWQgPSBgJHtNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMCl9YC5wYWRTdGFydCgzLCBcIjBcIilcbiAgICAgICAgZ2xvYmFsVGhpcy51aWQgPSBgJHt1cmxQYXJhbXMuZ2V0KFwicHJvbGlmaWNfcXVldWVfbmFtZVwiKX1fJHtxdWV1ZV9pZH1gXG4gICAgfVxufSBlbHNlIGlmIChERVZNT0RFKSB7XG4gICAgZ2xvYmFsVGhpcy51aWQgPSBcImRlbW9cIlxufSBlbHNlIHtcbiAgICBsZXQgVUlEX21heWJlOiBhbnkgPSBudWxsXG4gICAgd2hpbGUgKFVJRF9tYXliZSA9PSBudWxsKSB7XG4gICAgICAgIFVJRF9tYXliZSA9IHByb21wdChcIkVudGVyIHlvdXIgdXNlciBpZC4gUGxlYXNlIGdldCBpbiB0b3VjaCBpZiB5b3Ugd2VyZSBub3QgYXNzaWduZWQgYW4gaWQgYnV0IHdpc2ggdG8gcGFydGljaXBhdGUgaW4gdGhpcyBleHBlcmltZW50LlwiKVxuICAgIH1cbiAgICBnbG9iYWxUaGlzLnVpZCA9IFVJRF9tYXliZSFcbn1cblxuLy8gdmVyc2lvbiBmb3IgcGFwZXJcbmlmIChnbG9iYWxUaGlzLnVpZC5zdGFydHNXaXRoKFwiZGVtb19wYXBlclwiKSkge1xuICAgIE1PQ0tNT0RFID0gdHJ1ZVxufSBlbHNlIHtcblxufVxuY29uc29sZS5sb2coXCJSdW5uaW5nIHdpdGggVUlEXCIsIGdsb2JhbFRoaXMudWlkKVxubG9hZF9kYXRhKCkuY2F0Y2goKF9lcnJvcikgPT4ge1xuICAgIGFsZXJ0KFwiSW52YWxpZCB1c2VyIGlkLlwiKVxuICAgIGNvbnNvbGUubG9nKFwiSW52YWxpZCB1c2VyIGlkLlwiKVxuICAgIGNvbnNvbGUubG9nKGdsb2JhbFRoaXMudWlkISlcbiAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKClcbn1cbikudGhlbigobmV3X2RhdGEpID0+IHtcbiAgICBkYXRhID0gbmV3X2RhdGFcbiAgICBpZiAoc3RhcnRPdmVycmlkZSAhPSBudWxsKSB7XG4gICAgICAgIHF1ZXN0aW9uX2kgPSBwYXJzZUludChzdGFydE92ZXJyaWRlKSAtIDFcbiAgICAgICAgY29uc29sZS5sb2coXCJTdGFydGluZyBmcm9tXCIsIHF1ZXN0aW9uX2kpXG4gICAgfVxuICAgIC8vIG5leHRfcXVlc3Rpb24oKVxuICAgIG5leHRfaW5zdHJ1Y3Rpb25zKDApXG4gICAgJChcIiNtYWluX2JveF9pbnN0cnVjdGlvbnNcIikuc2hvdygpXG4gICAgJChcIiNpbnN0cnVjdGlvbnNfYW5kX2RlY29yYXRpb25zXCIpLmhpZGUoKVxufSlcblxuY29uc29sZS5sb2coXCJTdGFydGluZyBzZXNzaW9uIHdpdGggVUlEOlwiLCBnbG9iYWxUaGlzLnVpZCEpXG5cbmxldCBhbGVydF9hY3RpdmUgPSBmYWxzZVxuZG9jdW1lbnQub252aXNpYmlsaXR5Y2hhbmdlID0gKCkgPT4ge1xuICAgIGlmICghYWxlcnRfYWN0aXZlKSB7XG4gICAgICAgIGNvdW50X2V4aXRlZF9wYWdlICs9IDFcbiAgICAgICAgYWxlcnRfYWN0aXZlID0gdHJ1ZVxuICAgICAgICBhbGVydChcIlBsZWFzZSBkb24ndCBsZWF2ZSB0aGUgcGFnZS4gSWYgeW91IGRvIHNvIGFnYWluLCB3ZSBtYXkgcmVzdHJpY3QgcGF5aW5nIHlvdS5cIilcbiAgICAgICAgYWxlcnRfYWN0aXZlID0gZmFsc2VcbiAgICB9XG59IiwiZnVuY3Rpb24gcGFyYW1zVG9PYmplY3QoZW50cmllcykge1xuICBjb25zdCByZXN1bHQgPSB7fVxuICAvLyBlYWNoICdlbnRyeScgaXMgYSBba2V5LCB2YWx1ZV0gdHVwcGxlXG4gIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIGVudHJpZXMpIHtcbiAgICByZXN1bHRba2V5XSA9IHZhbHVlO1xuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbmV4cG9ydCB7IHBhcmFtc1RvT2JqZWN0IH0iXSwibmFtZXMiOlsiX193ZWJwYWNrX3JlcXVpcmVfXyIsImV4cG9ydHMiLCJkZWZpbml0aW9uIiwia2V5IiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsIm9iaiIsInByb3AiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJTRVJWRVJfTE9HX1JPT1QiLCJNT0NLTU9ERSIsImRhdGEiLCJiZXRfdmFsIiwidGltZV9xdWVzdGlvbl9zdGFydCIsInRpbWVfYmV0X3N0YXJ0IiwidGltZV9zaG93ZWRfcmVzdWx0c19zdGFydCIsInF1ZXN0aW9uX2kiLCJxdWVzdGlvbiIsInVzZXJfZGVjaXNpb24iLCJiYWxhbmNlIiwiYmV0X3ZhbF9yYXRpbyIsImluc3RydWN0aW9uX2kiLCJjb3VudF9leGl0ZWRfcGFnZSIsIm5leHRfaW5zdHJ1Y3Rpb25zIiwiaW5jcmVtZW50IiwiJCIsImF0dHIiLCJyZW1vdmVBdHRyIiwic2hvdyIsInZhbCIsImhpZGUiLCJuZXh0X3F1ZXN0aW9uIiwiY2hpbGRyZW4iLCJlYWNoIiwiXyIsImVsIiwiZmxpcF91c2VyX2RlY2lzaW9uIiwiY29ycmVjdCIsIkRhdGUiLCJub3ciLCJ0ZXh0IiwibGVuZ3RoIiwiaHRtbCIsInJhdGlvMSIsInJhdGlvMiIsIk51bWJlciIsIm9uIiwibG9nZ2VkX2RhdGEiLCJhc3luYyIsImNvbnNvbGUiLCJsb2ciLCJnbG9iYWxUaGlzIiwidXJsX2RhdGEiLCJhamF4IiwiSlNPTiIsInN0cmluZ2lmeSIsInByb2plY3QiLCJ1aWQiLCJwYXlsb2FkIiwidHlwZSIsImNvbnRlbnRUeXBlIiwiZSIsImxvZ19kYXRhIiwidGhpcyIsInRvRml4ZWQiLCJzdWNjZXNzIiwibWVzc2FnZSIsIk1hdGgiLCJtYXgiLCJ1cmxQYXJhbXMiLCJVUkxTZWFyY2hQYXJhbXMiLCJ3aW5kb3ciLCJsb2NhdGlvbiIsInNlYXJjaCIsInN0YXJ0T3ZlcnJpZGUiLCJVSURGcm9tVVJMIiwiZW50cmllcyIsInJlc3VsdCIsInZhbHVlIiwicGFyYW1zVG9PYmplY3QiLCJxdWV1ZV9pZCIsImZsb29yIiwicmFuZG9tIiwicGFkU3RhcnQiLCJVSURfbWF5YmUiLCJwcm9tcHQiLCJzdGFydHNXaXRoIiwiZ2V0SlNPTiIsImxvYWRfZGF0YSIsImNhdGNoIiwiX2Vycm9yIiwiYWxlcnQiLCJyZWxvYWQiLCJ0aGVuIiwibmV3X2RhdGEiLCJwYXJzZUludCIsImFsZXJ0X2FjdGl2ZSIsImRvY3VtZW50Iiwib252aXNpYmlsaXR5Y2hhbmdlIl0sInNvdXJjZVJvb3QiOiIifQ==